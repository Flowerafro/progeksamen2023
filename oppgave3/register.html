<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff register</title>
    <link href="style.css" rel="stylesheet" media="screen" />
</head>
<body>
    <header>
        <h1>Staff Register</h1>
    </header>
    <main>
        <section id="list">
            <nav id="filter">
                <p>Filter on position:</p>
                <ul id="positionFilter">
                    <li><button class="all active">All positions</button></li>
                </ul>
            </nav>
            <h2 id="listHeader">Showing all Staff</h2>
            <div id="staffList">
                
            </div>
        </section>
        <section id="admin">
            <div class="form">
                <h2>Add staff</h2>
                <p>
                    <label for="firstname">Firstname</label>
                    <input type="text" name="firstname" id="firstname" placeholder="Firstname" />
                </p>
                <p>
                    <label for="lastname">Lastname</label>
                    <input type="text" name="lastname" id="lastname" placeholder="Lastname" /></p>
                <p>
                    <label for="position">Position</label>
                    <select id="position" name="postition">
                       
                    </select>
                </p>
                <p>
                    <label for="department">Department</label>
                    <select id="department" name="department">
                        
                    </select>
                </p>
                <p>
                    <label for="email">Email address</label>
                    <input type="email" name="email" id="email" placeholder="you@email.com" /></select>
                </p>
                <button id="saveStaff">Save staff member</button>
            </div>
            <div class="form">
                <h2>Add position</h2>
                <p>
                    <label for="newPosition">Position</label>
                    <input type="text" name="newPosition" id="newPosition" placeholder="Position" />
                </p>
                <button id="savePosition" onClick="newPosition()">Save new position</button>
            </div>
            <div class="form">
                <h2>Add department</h2>
                <p>
                    <label for="newDepartment">Department</label><input type="text" name="newDepartment" id="newDepartment" placeholder="Department" />
                </p>
                <button id="saveDepartment">Save new department</button>
            </div>
        </section>
    </main>

    <script>
        //Array of staff objects
        const staff = [
            {firstname: "Bill", lastname: "Gates", position: "Director", department: "Administration", email: "bill@gates.net"},
        ]

        //Array of available positions
        const positions = ["Director", "Team leader", "Producer", "Engineer", "Designer"]

        //Array of available departments
        const departments = ["Administration", "Human Resources", "Production", "Finances"]

        /* -----------------  Kode av kandidat:     --------*/ 

        // Krav E - del 1) Ansatte listes opp i ansattlisten 
        staff.map(staff => document.getElementById("staffList").innerHTML += `
        <article class="membercard" id="staffmember-0">
        <h3>Gates, Bill</h3>
        <p class="metainfo">
        <img src="posicon.png" alt="position: "> Director
        <img src="depicon.png" alt="department: "> Administration
        </p><p><a href="mailto:bill@gates.net"><img src="mailicon.png"> Send mail to Bill</a></p>
        </article>`)

        // Kode for å gjøre position-nedtrekksmenyen synlig
        positions.map(position => document.getElementById("position").innerHTML = `
        <select id="position" name="postition">
        <option value="Director">Director</option>
        <option value="Team leader">Team leader</option>
        <option value="Producer">Producer</option>
        <option value="Engineer">Engineer</option>
        <option value="Designer">Designer</option>
        </select>`)

        // kode for å gjøre department-nedtrekksmenyen synlig
        departments.map(department => document.getElementById("department").innerHTML = `
        <select id="department" name="department">
        <option value="Administration">Administration</option>
        <option value="Finances">Finances</option>
        <option value="Human Resources">Human Resources</option>
        <option value="Production">Production</option>
        </select>
        `)

        // krav - E del 2) registrere nye ansatte gjennom HTML-skjemaet og nye ansatte lagres i kode

        //variabler for å få tak i input-feltene der informasjon om de ansatte registreres
        const staffFName = document.getElementById("firstname");
        const staffLName = document.getElementById("lastname");
        const staffPosition = document.getElementById("position");
        const staffDepartment = document.getElementById("department");
        const staffEmail = document.getElementById("email");

        // variabler for å få tak i verdien av input-feltene
        const fNameValue = staffFName.value;
        const lNameValue = staffLName.value;
        const positionValue = staffPosition.value;
        const departmentValue = staffDepartment.value;
        const emailValue = staffEmail.value;

        // kode for å legge til verdier inn i array staff objects. 
        //Her er det laget en addEventListner til knapp #saveStaff, slik at når det klikkes på den så sendes informasjonen til #staffList

        const saveStaffBtn = document.querySelector("#saveStaff");

        saveStaffBtn.addEventListener("click", function () {
            document.getElementById("staffList").innerHTML += `
        <article>
            <h3>${lNameValue}, ${fNameValue}</h3>
            <p>${positionValue}</p>
            <p>${departmentValue}</p>
            <a> Send email to: ${emailValue}</a>
            </article>`  
            
            staff.push({fNameValue, lNameValue, positionValue, departmentValue, emailValue});
        })        

        // Console log + Sjekke lengden av array
        console.log(staff);
        let staffNum = staff.length
        console.log("There is " + staffNum + " staffmembers registrered"); // consol-log over antall ansatte registrert
        
    </script>
</body>
</html>