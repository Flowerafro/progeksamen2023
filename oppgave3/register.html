<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff register</title>
    <link href="style.css" rel="stylesheet" media="screen" />
</head>
<body>
    <header>
        <h1>Staff Register</h1>
    </header>
    <main>
        <section id="list">
            <nav id="filter">
                <p>Filter on position:</p>
                <ul id="positionFilter">
                    <li><button class="all active">All positions</button></li>
                </ul>
            </nav>
            <h2 id="listHeader">Showing all Staff</h2>
            <div id="staffList">
                
            </div>
        </section>
        <section id="admin">
            <div class="form">
                <h2>Add staff</h2>
                <p>
                    <label for="firstname">Firstname</label>
                    <input type="text" name="firstname" id="firstname" placeholder="Firstname" required/>
                </p>
                <p>
                    <label for="lastname">Lastname</label>
                    <input type="text" name="lastname" id="lastname" placeholder="Lastname" required/></p>
                <p>
                    <label for="position">Position</label>
                    <select id="position" name="position" required>
                       
                    </select>
                </p>
                <p>
                    <label for="department">Department</label>
                    <select id="department" name="department" required>
                        
                    </select>
                </p>
                <p>
                    <label for="email">Email address</label>
                    <input type="email" name="email" id="email" placeholder="you@email.com" required/></select>
                </p>
                <button id="saveStaff">Save staff member</button>
            </div>
            <div class="form">
                <h2>Add position</h2>
                <p>
                    <label for="newPosition">Position</label>
                    <input type="text" name="newPosition" id="newPosition" placeholder="Position" />
                </p>
                <button id="savePosition" onClick="newPosition()">Save new position</button>
            </div>
            <div class="form">
                <h2>Add department</h2>
                <p>
                    <label for="newDepartment">Department</label>
                    <input type="text" name="newDepartment" id="newDepartment" placeholder="Department" />
                </p>
                <button id="saveDepartment">Save new department</button>
            </div>
        </section>
    </main>

    <script>
        //Array of staff objects
        const staff = [
            {firstname: "Bill", lastname: "Gates", position: "Director", department: "Administration", email: "bill@gates.net"},
            {firstname: "Armando", lastname: "Murillo", position: "Designer", department: "Production", email: "armando@murillo.net"},
        ]

        //Array of available positions
        const positions = ["Director", "Team leader", "Producer", "Engineer", "Designer"]

        //Array of available departments
        const departments = ["Administration", "Human Resources", "Production", "Finances"]


        // Krav D: Stillinger og avdelinger i nedtrekksmeny i HTMl sorteres
        const positionsSorted = positions.sort(); 
        const departmentsSorted = departments.sort();
    
        positionsSorted.map(position => document.getElementById("position").innerHTML = ` 
        <select id="position" name="position">
        <option>${positions[0]}</option>
        <option>${positions[1]}</option>
        <option>${positions[2]}</option>
        <option>${positions[3]}</option>
        <option>${positions[4]}</option>
        </select>`)

        // kode for å gjøre department-nedtrekksmenyen synlig
        departmentsSorted.map(department => document.getElementById("department").innerHTML = `
        <select id="department" name="department">
        <option>${departments[0]}</option>
        <option>${departments[1]}</option>
        <option>${departments[2]}</option>
        <option>${departments[3]}</option>
        </select>
        `)
    
        // Krav E Punkt 1) Kode til å liste opp ansatte (staff.array) i ansattliste 
        staff.map(staff => document.getElementById("staffList").innerHTML += `
        <article class="membercard" id="staffmember-0">
        <h3>${staff.lastname}, ${staff.firstname}</h3>
        <p class="metainfo">
            <img src="posicon.png" alt="position: ">${staff.position}
            <img src="depicon.png" alt="department: ">${staff.department}</p>
        <p><a href="mailto:${staff.email}">
        <img src="mailicon.png"> Send mail to ${staff.firstname}</a></p>
        </article>`)

        // Punkt 2) Registrere nye ansatte gjennom HTML-skjema

        // variabel for å finne Save Staff Member-knapp
        const addStaffBtn = document.getElementById("saveStaff")
        // Kode til å lokalisere ansattliste i HTML
        const staffList = document.getElementById("staffList")

        // variabel for å koble på addEventListner til knapp
        addStaffBtn.addEventListener("click", registerStaff)

        //funksjon som skal registrere nye ansatte
        function registerStaff () {
            const staffFirstname = document.getElementById("firstname").value
            const staffLastname = document.getElementById("lastname").value
            const staffPosition = document.getElementById("position").value
            const staffDepartment = document.getElementById("department").value
            const staffEmail = document.getElementById("email").value

            // Kode for å sende brukerinfo fra input-felt til HTML
            document.getElementById("staffList").innerHTML += `
            <article class="membercard" id="staffmember-1">
            <h3>${staffLastname}, ${staffFirstname}</h3>
            <p class="metainfo">
            <img src="posicon.png" alt="position: ">${staffPosition}
            <img src="depicon.png" alt="department: ">${staffDepartment}</p></p>
            <p><a href="mailto:${staffEmail}">
            <img src="mailicon.png"> Send mail to ${staffFirstname}</a></p>
            </article>`

            //oppdatere staff-array (push) brukerinfo til ansattliste
            staff.push({firstname: staffFirstname, lastname: staffLastname, position: staffPosition, department: staffDepartment, email: staffEmail});
            // Viser oppdatert ansattliste i konsoll
            console.log(staff);
        }

        // Kode for å tømme inputfelt etter innsending av brukerinfo 
       const clearInputBtn = document.getElementById("saveStaff");
        clearInputBtn.addEventListener("click", function clearInput(event) {
            event.preventDefault();
            const inputCleared = document.querySelectorAll("#firstname, #lastname, #position, #department, #email");
            inputCleared.forEach(input => {
                input.value = '';
            })
        }) 

        // D-krav nye avdelinger opprettes i HTML-skjemaet
        const addDepartment = document.getElementById("newDepartment");
        const addDepartmentValue = addDepartment.value;

        // funksjon for å sende verdi fra #newDepartment til array
        function newDepartment() {
            departments.push(addDepartmentValue);
        }

        // C-krav Nye stillinger opprettes i HTML-skjemaet
        // Få tak i input-felt og dens verdi:
        const addNewPosition = document.getElementById("newPosition");
        const addNewPositionValue = addNewPosition.value;
        //funksjon for å sende verdi fra #newPosition til Filter on position
        function newPosition() {
            document.getElementById("positionFilter").innerHTML += 
            `<li><button>${addNewPositionValue}</button></li>`

            positions.push(addNewPositionValue);
            console.log(positions);
        }

        //konsoll logg:
        console.log(departments);
        console.log(positions);

    </script>
</body>
</html>